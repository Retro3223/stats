<template>
  <!--page formating-->
  <require from="../../utilities/counter"></require>
  <require from="./match-input.css"></require>
  <require from="aurelia-validation/validate-binding-behavior"></require>
  <div class='container-fluid' show.bind='!errorNotScheduled'>
    <!--Team name and Event display-->
    <h1>
      <b>
        <u>
          <a route-href='route: event-team; params.bind: {year: event.year,
            eventCode: event.eventCode, teamNumber: team.teamNumber}'>
            ${team.teamNumber} (${team.teamName})
          </a>
        </u>
      </b>
    </h1>
    <h3>
      <b>
        <a route-href='route: event-matches; params.bind: {year: event.year,
          eventCode: event.eventCode }'>
          ${event.name}
        </a>
      </b>
      match ${model.matchNumber}
    </h3>


    <!--Buttons for switching pages, saving, and adding-->
    <button click.delegate='gotoPreviousMatch()'>Previous Match</button><br>
    <button click.delegate='addPlacement()'>Add</button><br>
    <button click.delegate='save()'>Save</button>
    <span show.bind="errorMessage != null"> ${errorMessage} </span><br>
    <button click.delegate='gotoNextMatch()'>Next Match</button>


    <!--Drop down menus for the cargo and hatch pickups-->
    <div class='row'>
      <div class='col form-group'>
        <label>Cargo Pickup</label>
        <select class='form-control' value.bind='model.cargoPickup & validate:rules'>
          <option></option>
          <option repeat.for='a of qualifiedAnswers'>${a.name}</option>
        </select>
        <label>Hatch Panel Pickup</label>
        <select class='form-control' value.bind='model.hatchPanelPickup'>
          <option></option>
          <option repeat.for='a of qualifiedAnswers'>${a.name}</option>
        </select>
      </div>
    </div>


    <!--This is what should appear when you press the add button-->
    <div id='TacoPlacements'>
      <!--Drop down menus-->
      <template class='row' repeat.for='p of model.placements'>
        <!--The labels that go above the columns-->
        <div class='gamePieceLabel'>
          <label>Game Piece</label>
          <label></label>
        </div>
        <div class='goalLabel'>
          <label>Goal</label>
        </div>
        <div class='secondsLabel'>
          <label>Seconds Left</label>
        </div>
        <div class='sandStormLabel'>
          <label>Sand Storm</label>
        </div>
        <div>
          <!--This div should be kept empty! Appears above the delete button, and unless you want formatting issues..
              keep it empty.-->
        </div>
        <div class=''>
          <select class='form-control' value.bind='p.gamepiece'>
            <option></option>
            <option repeat.for='r of gamepieceArray'>${r}</option>
          </select>
        </div>
        <div class=''>
          <select class='form-control' value.bind='p.location'>
            <option></option>
            <option repeat.for='m of locationArray'>${m}</option>
          </select>
        </div>
        <div class=''>
          <counter placeholder='seconds left' show-label.bind='false' model.bind='p' property="when" max.bind="maxWhen"
            rules.bind="placementRules"></counter>
        </div>
        <div class=''>
          <label>
            <input type='checkbox' class='' checked.bind='p.sandstorm' />Sandstorm
          </label>
        </div>
        <div class=''>
          <button type='button' click.delegate='deleteRow($index)' class="btn btn-danger">Delete Row</button>
        </div>
      </template>
    </div>


    <!--Climbing by yourself-->
    <div id='climbingPlacements'>
      <div class='row'>
        <div class='col'>
          <label>
            <input type='checkbox' class='' checked.bind='model.level3ClimbAttempted'> Level 3 Climb Attempted</label>
          </label>
        </div>
        <div class='col' show.bind='model.level3ClimbAttempted'>
          <div class='col'>
            <label>Seconds Left When Started</label>
            <input placeholder='Begin' />
          </div>
          <div class='col'>
            <label>Seconds Left When Finished</label>
            <input placeholder='End' />
          </div>
          <div class='col'>
            <label>
              <input type='checkbox' class='' checked.bind='model.level3ClimbSucceeded'> Level 3 Climb Succeeded</label>
            </label>
          </div>
        </div>
        <div class='col'>
          <label>
            <input type='checkbox' class='' checked.bind='model.level2ClimbAttempted'> Level 2 Climb Attempted</label>
          </label>
        </div>
        <div class='col'>
          <label>
            <input type='checkbox' class='' checked.bind='model.level2ClimbSucceeded'> Level 2 Climb Succeeded</label>
          </label>
        </div>
      </div>
    <!--Lifting-->
      <div class='row'>
        <!--Lifted by another team-->
        <div class='col-sm-10'>
          <label>
            <input type='checkbox' class='' checked.bind='model.liftedBy'>Was Lifted</label>
          </label>
        </div>
        <!--Asking what team lifted them-->
        <div class='col-sm-10' show.bind='model.liftedBy'>
          <label>Lifted By:</label>
          <input placeholder='Team Name, and Number' />
        </div>
        <!--Lifted other teams-->
        <div class='col-sm-7'>
          <label>
            <input type='checkbox' class='' checked.bind='liftedSomeone'>Lifted Another Team</label>
        </div>
        <!--What teams they lifted-->
        <div class='col-sm-7' show.bind='liftedSomeone'>
          <label>
            Lifted ${partner1}
            <input type='checkbox' class='form-control' checked.bind='liftedPartner1' />
          </label>
          <label>
            Lifted ${partner2}
            <input type='checkbox' class='form-control' checked.bind='liftedPartner2' />
          </label>
        </div>
      </div>
    </div>


    <!--Fouls-->
    <div class='row'>
      <div class='col'>
        <label class='form-control-label'>Fouls?</label>
        <div>
          <label>
            <input type='radio' class='form-control' name="fouls" checked.bind="model.isFoul" model.bind="true"> Yes
          </label>
          <br>
          <label>
            <input type='radio' class='form-control' name="fouls" checked.bind="model.isFoul" model.bind="false"> No
          </label>
          <br>
        </div>
        <div class='col' show.bind='model.isFoul'>
          <label class='form-control-label' for='foulReason'>Foul Reason:</label>
          <textarea id='foulReason' class='form-control' rows='5' value.bind='model.foulReason'></textarea>
        </div>
      </div>
    </div>


    <!--Notes-->
    <div class='row'>
      <div class='col'>
        <h5>Notes</h5>
        <textarea id='areaNotes' class='form-control' rows='5' value.bind='model.autoNotes'></textarea>
      </div>
    </div>
  </div>
</template>