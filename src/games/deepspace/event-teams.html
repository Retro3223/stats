<template>
  <require from="aurelia-bootstrap/tabs/aubs-tab"></require>
  <require from="aurelia-bootstrap/tabs/aubs-tabset"></require>

  <div class='container-fluid'>
    <h1> ${event.name} * ${gameName} * ${event.calendarYear}</h1>

    <!--<p> Maybe make a tab for match schedule, and make a tab for team list? </p>-->
    <ul class='nav nav-tabs'>
      <li class='nav-item'>
        <a class='nav-link' route-href="route: event-matches; params.bind: {year: event.year, eventCode: event.eventCode}">Matches</a>
      </li>
      <li class='nav-item active'>
        <a class='nav-link active' href="javascript:void">Teams (${teamsData.length})</a>
      </li>
      <li>
        <button style="width:200px" class="btn btn-secondary" click.delegate='showDevValues()'><span show.bind='showDevStuff'>Hide </span><span show.bind='!showDevStuff'>Show </span>Dev Values</button>
      </li>
    </ul>
    <div class='tab-content'>
      <table class="table table-hover">
        <tr>
          <th class='clickable' click.delegate="sortByTeamNumber()">Team Number</th>
          <th>Team Name</th>
          <th>Scouted Match Count</th>
          <th>Cargo Pickup</th>
          <th>Hatch Pickup</th>
          <th>Avg Cargo Cycle Time</th>
          <th>Avg Hatch Cycle Time</th>
          <th>Avg Gamepiece Count</th>
          <th>Avg Cargo Count</th>
          <th>Avg Hatch Count</th>
          <th>Avg Cargo Sandstorm</th>
          <th>Avg Hatch Sandstorm</th>
          <th># of Teams Lifted</th>
          <th>% of Matches (Cargo)</th>
          <th>% of Matches (Hatch)</th>
          <th>Defense Rating</th>
        </tr>
        <tr repeat.for="teamData of teamsData">
          <td>
            <a style="display: block;" route-href="route.bind:'event-team'; params.bind: {year: event.year, eventCode: event.eventCode, teamNumber: teamData.teamNumber}">
              ${teamData.teamNumber}
            </a>
          </td>
          <td>
            ${teamData.teamName}
          </td>
          <td>
            ${teamData.matchCount}
          </td>
          <td>
            <span show.bind='!showDevStuff'>${teamData.cargoPickup.name}</span><span show.bind='showDevStuff'>${teamData.cargoPickupRaw}/40</span>
          </td>
          <td>
            <span show.bind='!showDevStuff'>${teamData.hatchPanelPickup.name}</span><span show.bind='showDevStuff'>${teamData.hatchPanelPickupRaw}/40</span>
          </td>
          <td>
            <span show.bind='!showDevStuff'>${teamData.avgCargoCycleTime}</span><span show.bind='showDevStuff'>${teamData.cargoCycleTimeRaw}/60</span>
          </td>
          <td>
            <span show.bind='!showDevStuff'>${teamData.avgHatchPanelCycleTime}</span><span show.bind='showDevStuff'>${teamData.hatchPanelCycleTimeRaw}/60</span>
          </td>
          <td>
            <span show.bind='!showDevStuff'>${teamData.avgGamepieceCount}</span><span show.bind='showDevStuff'>${teamData.cargoCountRaw + teamData.hatchPanelCountRaw}/${teamData.cargoPlacedMatchCount}</span>
          </td>
          <td>
            <span show.bind='!showDevStuff'>${teamData.avgCargoCount}</span><span show.bind='showDevStuff'>${teamData.cargoCountRaw}/${teamData.cargoPlacedMatchCount}</span>
          </td>
          <td>
            <span show.bind='!showDevStuff'>${teamData.avgHatchPanelCount}</span><span show.bind='showDevStuff'>${teamData.hatchPanelCountRaw}/${teamData.hatchPanelPlacedMatchCount}</span>
          </td>
          <td>
            <span show.bind='!showDevStuff'>${teamData.avgSandstormCargoCount}</span><span show.bind='showDevStuff'>${teamData.sandstormCargoCountRaw}/${teamData.cargoPlacedMatchCount}</span>
          </td>
          <td>
            <span show.bind='!showDevStuff'>${teamData.avgSandstormHatchPanelCount}</span><span show.bind='showDevStuff'>${teamData.sandstormHatchPanelCountRaw}/${teamData.hatchPanelPlacedMatchCount}</span>
          </td>
          <td>
            <!--${teamData.lifted.length}-->
            ${teamData.teamsLiftedCount}
          </td>
          <td>
            ${teamData.cargoPercent}%
          </td>
          <td>
            ${teamData.hatchPanelPercent}%
          </td>
          <td>
            todo
          </td>
        </tr>
      </table>
    </div>
  </div>

</template>
